{% extends "base.html" %}

{% block title %}Add Data | EcoTrack{% endblock %}

{% block content %}
<script src="https://unpkg.com/@tabler/icons@latest/icons-react/dist/index.umd.min.js"></script>

<!-- Stepper -->
<div data-stepper='{ "currentIndex": 1 }' class="w-full">
  <!-- Stepper Nav -->
  <ul class="relative flex flex-row gap-x-2 justify-center pb-2">
    <li class="group flex flex-1 shrink basis-0 items-center gap-x-2" data-stepper-nav-item='{ "index": 1 }'>
      <span class="min-h-7.5 min-w-7.5 inline-flex items-center align-middle text-sm">
        <span class="flex size-8 items-center justify-center rounded-full font-bold shadow-sm ring-2 ring-offset-2 ring-white bg-gray-200 text-gray-700">
          1
        </span>
        <span class="ms-2 max-sm:hidden">Travel</span>
        <div class="bg-neutral/20 ms-2 h-px w-full flex-1 group-last:hidden"></div>
      </span>
      <div class="bg-neutral/20 h-px w-full flex-1 group-last:hidden"></div>
    </li>
    <li class="group flex flex-1 shrink basis-0 items-center gap-x-2" data-stepper-nav-item='{ "index": 2 }'>
      <span class="min-h-7.5 min-w-7.5 inline-flex items-center align-middle text-sm">
        <span class="stepper-active:bg-primary stepper-active:text-white stepper-completed:bg-success stepper-completed:text-white stepper-error:bg-red-500 stepper-error:text-white bg-gray-200 text-gray-700 flex size-8 items-center justify-center rounded-full font-bold shadow-sm ring-2 ring-offset-2 ring-white">
          <span class="stepper-success:hidden stepper-completed:hidden">2</span>
          <span class="icon-[tabler--check] stepper-success:block hidden size-4 shrink-0"></span>
        </span>
        <span class="text-base-content ms-2 max-sm:hidden">Home</span>
      </span>
      <div class="stepper-success:bg-primary stepper-completed:bg-success bg-neutral/20 h-px w-full flex-1 group-last:hidden"></div>
    </li>
    <li class="group flex flex-1 shrink basis-0 items-center gap-x-2" data-stepper-nav-item='{ "index": 3 }'>
      <span class="min-h-7.5 min-w-7.5 inline-flex items-center align-middle text-sm">
        <span class="stepper-active:bg-primary stepper-active:text-white stepper-completed:bg-success stepper-completed:text-white stepper-error:bg-red-500 stepper-error:text-white bg-gray-200 text-gray-700 flex size-8 items-center justify-center rounded-full font-bold shadow-sm ring-2 ring-offset-2 ring-white">
          <span class="stepper-success:hidden stepper-completed:hidden">3</span>
          <span class="icon-[tabler--check] stepper-success:block hidden size-4 shrink-0"></span>
        </span>
        <span class="text-base-content ms-2 max-sm:hidden">Food</span>
      </span>
      <div class="stepper-success:bg-primary stepper-completed:bg-success bg-neutral/20 h-px w-full flex-1 group-last:hidden"></div>
    </li>
    <li class="group flex flex-1 shrink basis-0 items-center gap-x-2" data-stepper-nav-item='{ "index": 4 }'>
      <span class="min-h-7.5 min-w-7.5 inline-flex items-center align-middle text-sm">
        <span class="stepper-active:bg-primary stepper-active:text-white stepper-completed:bg-success stepper-completed:text-white stepper-error:bg-red-500 stepper-error:text-white bg-gray-200 text-gray-700 flex size-8 items-center justify-center rounded-full font-bold shadow-sm ring-2 ring-offset-2 ring-white">
          <span class="stepper-success:hidden stepper-completed:hidden">4</span>
          <span class="icon-[tabler--check] stepper-success:block hidden size-4 shrink-0"></span>
        </span>
        <span class="text-base-content ms-2 max-sm:hidden">Shopping</span>
      </span>
    </li>
  </ul>
  <!-- End Stepper Nav -->

  <!-- Stepper Content -->
  <!-- Travel Content -->
    <div data-stepper-content-item='{ "index": 1 }'>
      <div class="grid grid-cols-1 gap-6">
        <!-- Your Vehicles Section -->
        <div class="panel panel-default">
          <div class="panel-heading flex justify-between items-center">
            <span>Your Vehicles</span>
            <button id="travel__add_vehicle" class="flex items-center gap-2 border border-primary bg-primary text-white rounded-full px-4 py-2 hover:bg-primary/90 transition" onclick="addVehicle()">
              <i class="icon-[tabler--plus] mr-1"></i>Add Vehicle
            </button>
          </div>
          <div class="panel-body space-y-4" id="vehicles-container">
            <!-- Vehicle template will be added here dynamically -->
          </div>
        </div>

        <!-- Public Transit Section -->
        <div class="panel panel-default">
          <div class="panel-heading">Public Transit</div>
          <div class="panel-body space-y-4">
            <div class="form-control">
              <label class="label">
                <span class="label-text">Bus</span>
              </label>
              <div class="input-group">
                <input type="number" class="input input-bordered w-full" placeholder="130" id="bus-miles" min="0">
                <span class="input-group-addon">kms/yr</span>
              </div>
            </div>
            
            <div class="form-control">
              <label class="label">
                <span class="label-text">Transit Rail (light & heavy)</span>
              </label>
              <div class="input-group">
                <input type="number" class="input input-bordered w-full" placeholder="97" id="transit-rail-miles" min="0">
                <span class="input-group-addon">kms/yr</span>
              </div>
            </div>
            
            <div class="form-control">
              <label class="label">
                <span class="label-text">Commuter Rail</span>
              </label>
              <div class="input-group">
                <input type="number" class="input input-bordered w-full" placeholder="65" id="commuter-rail-miles" min="0">
                <span class="input-group-addon">kms/yr</span>
              </div>
            </div>
            
            <div class="form-control">
              <label class="label">
                <span class="label-text">Inter-city Rail (Amtrak)</span>
              </label>
              <div class="input-group">
                <input type="number" class="input input-bordered w-full" placeholder="32" id="intercity-rail-miles" min="0">
                <span class="input-group-addon">kms/yr</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Air Travel Section -->
        <div class="panel panel-default">
          <div class="panel-heading">Air Travel</div>
          <div class="panel-body space-y-4">
            <div class="form-control">
              <label class="label">
                <span class="label-text">Short (&lt; 400 kms/yr)</span>
              </label>
              <div class="input-group">
                <input type="number" class="input input-bordered w-full" placeholder="3" id="short-flights" min="0">
                <span class="input-group-addon">flights/year</span>
              </div>
            </div>
            
            <div class="form-control">
              <label class="label">
                <span class="label-text">Medium (400 - 1500 kms/yr)</span>
              </label>
              <div class="input-group">
                <input type="number" class="input input-bordered w-full" placeholder="2" id="medium-flights" min="400">
                <span class="input-group-addon">flights/year</span>
              </div>
            </div>
            
            <div class="form-control">
              <label class="label">
                <span class="label-text">Long (1500 - 3000 kms/yr)</span>
              </label>
              <div class="input-group">
                <input type="number" class="input input-bordered w-full" placeholder="0" id="long-flights" min="1500">
                <span class="input-group-addon">flights/year</span>
              </div>
            </div>
            
            <div class="form-control">
              <label class="label">
                <span class="label-text">Extended (&gt; 3000 kms/yr)</span>
              </label>
              <div class="input-group">
                <input type="number" class="input input-bordered w-full" placeholder="0" id="extended-flights" min="3000">
                <span class="input-group-addon">flights/year</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Home Content -->
    <div data-stepper-content-item='{ "index": 2 }' style="display: none;">
      <div class="grid grid-cols-1 gap-6">
        <!-- Electricity Section -->
        <div class="form-control">
          <label class="label">
            <span class="label-text">Electricity</span>
            <button class="btn btn-xs btn-circle btn-ghost">
              <i class="icon-[tabler--help]"></i>
            </button>
          </label>
          <div class="input-group">
            <input type="number" class="input input-bordered w-full" placeholder="1,350" id="electricity" min="0">
            <select class="select select-bordered">
              <option>$</option>
              <option>kWh</option>
            </select>
            <select class="select select-bordered">
              <option>/yr</option>
              <option>/mo</option>
            </select>
          </div>
        </div>
    
        <!-- Clean Energy Percentage -->
        <div class="form-control clean-energy-slider-container">
          <div class="flex justify-between items-center mb-1">
            <span class="text-sm">Percent purchased from clean energy</span>
            <span class="font-bold clean-energy-value">31%</span>
          </div>
          <input type="range" min="0" max="100" step="0.01" value="31" 
                  class="w-full range range-primary clean-energy-slider">
          <div class="flex justify-between text-xs">
            <span>0</span>
            <span>20</span>
            <span>40</span>
            <span>60</span>
            <span>80</span>
            <span>100</span>
          </div>
        </div>
    
        <!-- Natural Gas Section -->
        <div class="form-control">
          <label class="label">
            <span class="label-text">Natural Gas</span>
            <button class="btn btn-xs btn-circle btn-ghost">
              <i class="icon-[tabler--help]"></i>
            </button>
          </label>
          <div class="input-group">
            <input type="number" class="input input-bordered w-full" placeholder="590" id="natural-gas" min="0">
            <select class="select select-bordered">
              <option>$</option>
              <option>therms</option>
              <option>m³</option>
            </select>
            <select class="select select-bordered">
              <option>/yr</option>
              <option>/mo</option>
            </select>
          </div>
        </div>
    
        <!-- Heating Oil Section -->
        <div class="form-control">
          <label class="label">
            <span class="label-text">Heating Oil & Other Fuels</span>
            <button class="btn btn-xs btn-circle btn-ghost">
              <i class="icon-[tabler--help]"></i>
            </button>
          </label>
          <div class="input-group">
            <input type="number" class="input input-bordered w-full" placeholder="260" id="heating-oil" min="0">
            <select class="select select-bordered">
              <option>$</option>
              <option>litres</option>
            </select>
            <select class="select select-bordered">
              <option>/yr</option>
              <option>/mo</option>
            </select>
          </div>
        </div>
    
        <!-- Living Space Area -->
        <div class="form-control">
          <label class="label">
            <span class="label-text">Living space area</span>
            <button class="btn btn-xs btn-circle btn-ghost">
              <i class="icon-[tabler--help]"></i>
            </button>
          </label>
          <div class="input-group">
            <input type="number" class="input input-bordered w-full" placeholder="1,850" id="living-space" min="0">
            <span class="input-group-addon">m²</span>
          </div>
        </div>
    
        <!-- Water Usage -->        
        <div class="form-control water-usage-slider-container">
          <div class="flex justify-between items-center mb-1">
            <span class="text-sm">Water Usage</span>
            <span class="font-bold water-value">50.0%</span>
          </div>
          <input type="range" min="0.01" max="100" step="0.01" value="50.0" 
                  class="w-full range range-primary water-usage-slider">
          <div class="flex justify-between text-xs">
            <span>0</span>
            <span>20</span>
            <span>40</span>
            <span>60</span>
            <span>80</span>
            <span>100</span>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Food Content -->
    <div data-stepper-content-item='{ "index": 3 }' style="display: none;">
      <div class="grid grid-cols-1 gap-6">
        <div class="panel panel-default">
          <div class="panel-heading flex justify-between items-center">
            <h3>How much does the average person in your household eat?</h3>
            <button class="btn btn-xs btn-circle btn-ghost">
              <i class="icon-[tabler--help]"></i>
            </button>
          </div>
          <div class="panel-body space-y-6">
        
            <!-- Food Categories -->
            <div class="food-category">
              <h4 class="flex items-center gap-2">
                <span>Meat, fish, eggs</span>
                <button class="btn btn-xs btn-circle btn-ghost">
                  <i class="icon-[tabler--help] text-sm"></i>
                </button>
              </h4>
              <div class="food-slider-container">
                <div class="flex justify-between items-center mb-1">
                  <span class="text-sm">Servings per person:</span>
                  <span class="font-bold food-value">2.3x</span>
                </div>
                <input type="range" min="0.01" max="3" step="0.01" value="2.3" 
                        class="w-full range range-primary food-slider">
                <div class="flex justify-between text-xs">
                  <span>0</span>
                  <span>Average</span>
                  <span>2x</span>
                  <span>3x</span>
                </div>
              </div>
            </div>
    
            
            <!-- More food categories would follow the same pattern -->
            <div class="food-category">
              <h4 class="flex items-center gap-2">
                <span>Grains & baked goods</span>
                <button class="btn btn-xs btn-circle btn-ghost">
                  <i class="icon-[tabler--help] text-sm"></i>
                </button>
              </h4>
              <div class="food-slider-container">
                <div class="flex justify-between items-center mb-1">
                  <span class="text-sm">Servings per person:</span>
                  <span class="font-bold food-value">3.9x</span>
                </div>
                <input type="range" min="0.01" max="3" step="0.01" value="3.9" 
                        class="w-full range range-primary food-slider">
                <div class="flex justify-between text-xs">
                  <span>0</span>
                  <span>Average</span>
                  <span>2x</span>
                  <span>3x</span>
                </div>
              </div>
            </div>
    
            <div class="food-category">
              <h4 class="flex items-center gap-2">
                <span>Dairy</span>
                <button class="btn btn-xs btn-circle btn-ghost">
                  <i class="icon-[tabler--help] text-sm"></i>
                </button>
              </h4>
              <div class="food-slider-container">
                <div class="flex justify-between items-center mb-1">
                  <span class="text-sm">Servings per person:</span>
                  <span class="font-bold food-value">2.1x</span>
                </div>
                <input type="range" min="0.01" max="3" step="0.01" value="2.1" 
                        class="w-full range range-primary food-slider">
                <div class="flex justify-between text-xs">
                  <span>0</span>
                  <span>Average</span>
                  <span>2x</span>
                  <span>3x</span>
                </div>
              </div>
            </div>
    
            <div class="food-category">
              <h4 class="flex items-center gap-2">
                <span>Fruits and vegetables</span>
                <button class="btn btn-xs btn-circle btn-ghost">
                  <i class="icon-[tabler--help] text-sm"></i>
                </button>
              </h4>
              <div class="food-slider-container">
                <div class="flex justify-between items-center mb-1">
                  <span class="text-sm">Servings per person:</span>
                  <span class="font-bold food-value">3.4x</span>
                </div>
                <input type="range" min="0.01" max="3" step="0.01" value="3.4" 
                        class="w-full range range-primary food-slider">
                <div class="flex justify-between text-xs">
                  <span>0</span>
                  <span>Average</span>
                  <span>2x</span>
                  <span>3x</span>
                </div>
              </div>
            </div>
    
            <div class="food-category">
              <h4 class="flex items-center gap-2">
                <span>Snacks, drinks, etc...</span>
                <button class="btn btn-xs btn-circle btn-ghost">
                  <i class="icon-[tabler--help] text-sm"></i>
                </button>
              </h4>
              <div class="food-slider-container">
                <div class="flex justify-between items-center mb-1">
                  <span class="text-sm">Servings per person:</span>
                  <span class="font-bold food-value">3.2x</span>
                </div>
                <input type="range" min="0.01" max="3" step="0.01" value="3.2" 
                  class="w-full range range-primary food-slider">
                <div class="flex justify-between text-xs">
                  <span>0</span>
                  <span>Average</span>
                  <span>2x</span>
                  <span>3x</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Shopping Content -->
    <div data-stepper-content-item='{ "index": 4 }' style="display: none;">
      <div class="grid grid-cols-1 gap-6">
        <div class="panel panel-default">
          <!-- <div class="panel-heading flex justify-between items-center">
            <h3>How much do you spend on each of the following?</h3>
            <div class="btn-group">
              <button class="btn btn-success btn-sm">Simple</button>
              <button class="btn btn-sm">Advanced</button>
            </div>
          </div> -->
          <div class="panel-body space-y-6">
            <!-- Goods Spending -->
            <div class="shopping-category">
              <h4 class="flex items-center gap-2">
                <span>Goods</span>
                <button class="btn btn-xs btn-circle btn-ghost">
                  <i class="icon-[tabler--help] text-sm"></i>
                </button>
              </h4>
              <div class="shopping-slider-container">
                <div class="flex justify-between items-center mb-1">
                  <span class="text-sm">Monthly spending:</span>
                  <span class="font-bold shopping-value">$1,595</span>
                </div>
                <input type="range" min="0.0001" max="3" step="0.01" value="1" 
                        class="w-full range range-primary shopping-slider">
                <div class="flex justify-between text-xs">
                  <span>0</span>
                  <span>Average</span>
                  <span>2x</span>
                  <span>3x</span>
                </div>
              </div>
            </div>
    
            <!-- Services Spending -->
            <div class="shopping-category">
              <h4 class="flex items-center gap-2">
                <span>Services</span>
                <button class="btn btn-xs btn-circle btn-ghost">
                  <i class="icon-[tabler--help] text-sm"></i>
                </button>
              </h4>
              <div class="shopping-slider-container">
                <div class="flex justify-between items-center mb-1">
                  <span class="text-sm">Monthly spending:</span>
                  <span class="font-bold shopping-value">$2,929</span>
                </div>
                <input type="range" min="0.0001" max="3" step="0.01" value="1" 
                        class="w-full range range-primary shopping-slider">
                <div class="flex justify-between text-xs">
                  <span>0</span>
                  <span>Average</span>
                  <span>2x</span>
                  <span>3x</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Final Content -->
    <div data-stepper-content-item='{ "isFinal": true }' style="display: none;">
      <div class="border-base-content/40 bg-base-200/50 flex h-48 items-center justify-center rounded-xl border border-dashed p-4">
        <h3 class="text-base-content/50 text-2xl">Your Carbon Footprint Calculation is Complete!</h3>
      </div>
    </div>
    
    <!-- Button Group -->
      <div class="mt-5 flex items-center justify-between gap-x-4">
        <button
          type="button"
          class="flex items-center gap-2 border border-primary text-primary rounded-full px-4 py-2 hover:bg-primary hover:text-white transition"
          data-stepper-back-btn=""
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M15 19l-7-7 7-7" />
          </svg>
          Back
        </button>

        <button
          type="button"
          class="flex items-center gap-2 border border-primary bg-primary text-white rounded-full px-4 py-2 hover:bg-primary/90 transition"
          data-stepper-next-btn=""
        >
          Next
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M9 5l7 7-7 7" />
          </svg>
        </button>

        <button
          type="button"
          class="hidden flex items-center gap-2 border border-success bg-success text-green rounded-full px-4 py-2 hover:bg-success/90 transition"
          data-stepper-finish-btn=""
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M5 13l4 4L19 7" />
          </svg>
          Calculate Footprint
        </button>
      </div>


  </div>
  <!-- End Stepper Content -->
</div>
<!-- End Stepper -->


<script>
  document.addEventListener('DOMContentLoaded', function() {
    const stepper = document.querySelector('[data-stepper]');
    const navItems = document.querySelectorAll('[data-stepper-nav-item]');
    const contentItems = document.querySelectorAll('[data-stepper-content-item]');
    const prevBtn = document.querySelector('[data-stepper-back-btn]');
    const nextBtn = document.querySelector('[data-stepper-next-btn]');
    const finishBtn = document.querySelector('[data-stepper-finish-btn]');

    let currentIndex = 1;
    const totalSteps = navItems.length;

    // Initialize stepper
    updateStepper();

    // Navigation handlers
    prevBtn.addEventListener('click', goToPrevStep);
    nextBtn.addEventListener('click', goToNextStep);
    finishBtn.addEventListener('click', finishStepper);

    function goToStep(index) {
    currentIndex = index;
      updateStepper();
    }

    function goToPrevStep() {
      if (currentIndex > 1) {
        currentIndex--;
        updateStepper();
      }
    }

    function goToNextStep() {
      if (currentIndex < totalSteps) {
        currentIndex++;
        updateStepper();
      }
    }

    function finishStepper() {
      alert('Carbon footprint calculation complete!');
    }

    function updateStepper() {
      // Update nav items
      navItems.forEach((item, index) => {
        const stepNumber = index + 1;
        const circle = item.querySelector('span span:first-child');
        
        // Reset all steps
        circle.classList.remove('stepper-completed', 'stepper-active');
        circle.classList.add('bg-gray-200', 'text-gray-700');
        
        // Current step
        if (stepNumber === currentIndex) {
          circle.classList.add('stepper-active');
          circle.classList.remove('bg-gray-200', 'text-gray-700');
        }
        // Completed steps
        else if (stepNumber < currentIndex) {
          circle.classList.add('stepper-completed');
          circle.classList.remove('bg-gray-200', 'text-gray-700');
        }
      });

      // Update content visibility
      contentItems.forEach((item, index) => {
        const stepNumber = index + 1;
        item.style.display = stepNumber === currentIndex ? 'block' : 'none';
      });

      // Update button visibility
      prevBtn.style.display = currentIndex > 1 ? 'flex' : 'none';
      nextBtn.style.display = currentIndex < totalSteps ? 'flex' : 'none';
      finishBtn.style.display = currentIndex === totalSteps ? 'flex' : 'none';
    }
  });

  // Vehicle Template (hidden)
  const vehicleTemplate = document.createElement('template');
  vehicleTemplate.innerHTML = `
    <div class="vehicle-mpg-container vehicle-item space-y-2">
      <div class="flex gap-2">
        <select class="select select-bordered flex-1 vehicle-fuel-type">
          <option value="gasoline">Gasoline</option>
          <option value="diesel">Diesel</option>
          <option value="electric">Electric</option>
        </select>
        <button type="button" class="focus:outline-none text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-2 py-1 me-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900" 
          onclick="deleteVehicle(this.closest('div.vehicle-item'))"
        >
          X
        </button>
      </div>
      
      <div class="input-group">
        <input type="number" class="input input-bordered w-full vehicle-distance" placeholder="15,600">
        <span class="input-group-addon">kms/yr</span>
      </div>
      
      <div class="space-y-1">
        <div class="flex justify-between text-sm">
          <span>Fuel Efficiency</span>
          <span class="vehicle-mpg-value">22</span>
        </div>
        <input type="range" min="10" max="115" value="22" step="1" class="w-full range range-primary vehicle-mpg">
        <div class="flex justify-between text-xs">
          <span>10</span>
          <span>25</span>
          <span>40</span>
          <span>55</span>
          <span>70</span>
          <span>85</span>
          <span>100</span>
          <span>115</span>
        </div>
      </div>
    </div>
  `;

    function addVehicle() { 
      const addingVehicleContainer = document.getElementById('vehicles-container')
      const vehicleChildNode = vehicleTemplate.content.cloneNode(true)
      addingVehicleContainer.appendChild(vehicleChildNode);

     // Vehicle sliders
      setupSlider('.vehicle-mpg', '.vehicle-mpg-value', (slider, value) => {
        return parseFloat(value).toFixed(1);
      });
    }

    function deleteVehicle(el) {
      const locatingVehicleItem = el
      locatingVehicleItem.remove()
    }

  // Food Section Functionality
  const foodSimpleAdvancedBtns = document.querySelectorAll('.food-category .btn-group button');
  foodSimpleAdvancedBtns.forEach(btn => {
    btn.addEventListener('click', function() {
      // Toggle active state
      foodSimpleAdvancedBtns.forEach(b => b.classList.toggle('btn-success', b === this));
      foodSimpleAdvancedBtns.forEach(b => b.classList.toggle('btn-default', b !== this));
      
      // Toggle advanced food categories
      document.querySelectorAll('.advanced-food').forEach(el => {
        el.classList.toggle('hidden', this.textContent === 'Simple');
      });
    });
  });

  // Shopping Section Functionality
  const shoppingSimpleAdvancedBtns = document.querySelectorAll('.shopping-category .btn-group button');
  shoppingSimpleAdvancedBtns.forEach(btn => {
    btn.addEventListener('click', function() {
      // Toggle active state
      shoppingSimpleAdvancedBtns.forEach(b => b.classList.toggle('btn-success', b === this));
      shoppingSimpleAdvancedBtns.forEach(b => b.classList.toggle('btn-default', b !== this));
    });
  });

  // Update slider values in real-time
  function setupSlider(sliderClass, valueClass, formatter) {
    document.querySelectorAll(sliderClass).forEach(slider => {
      const valueElement = slider.closest(`${sliderClass}-container`)
                                .querySelector(valueClass);
      
      slider.addEventListener('input', function() {
        valueElement.textContent = formatter(slider, this.value);
      });
    });
  }

  // Clean Energy sliders
  setupSlider('.clean-energy-slider', '.clean-energy-value', (slider, value) => {
    return parseFloat(value).toFixed(1)+"%";
  });

  // Water Usage sliders
  setupSlider('.water-usage-slider', '.water-value', (slider, value) => {
    return parseFloat(value).toFixed(1)+"%";
  });

  // Food sliders
  setupSlider('.food-slider', '.food-value', (slider, value) => {
    return parseFloat(value).toFixed(1)+"x";
  });

  // Shopping sliders
  setupSlider('.shopping-slider', '.shopping-value', (slider, value) => {
    const multiplier = parseFloat(value);
    const baseValues = {
      'Goods': 1311,
      'Services': 2413
    };
    const category = slider.closest('.shopping-category').querySelector('h4 span').textContent;
    const amount = Math.round(baseValues[category] * multiplier);
    return `$${amount.toLocaleString()}`;
  });

</script>

{% endblock %}