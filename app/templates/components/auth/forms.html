<div class="w-full max-w-md">
    <h1 class="subtitle">{{ 'Log In' if active_page == 'login' else 'Sign Up' }}</h1>
    <p class="text-gray mb-6">
        {{ 'Welcome back! Please enter your details.' if active_page == 'login' else 'Create your account to get
        started.' }}
    </p>
    <form method="POST" class="space-y-6">
        {{ form.hidden_tag() }}

        {% if active_page == 'signup' %}
        <div class="grid grid-cols-2 gap-4">
            <!-- First Name -->
            <div class="relative">
                {{ form.first_name(class="input-field floating-input", id="first-name", placeholder="") }}
                {{ form.first_name.label(class="floating-label", for="first-name") }}
                {% if form.first_name.errors %}
                <div class="text-red-600 text-sm mt-1">
                    {% for error in form.first_name.errors %}
                    <span>{{ error }}</span>
                    {% endfor %}
                </div>
                {% endif %}
            </div>

            <!-- Last Name -->
            <div class="relative">
                {{ form.last_name(class="input-field floating-input", id="last-name", placeholder="") }}
                {{ form.last_name.label(class="floating-label", for="last-name") }}
                {% if form.last_name.errors %}
                <div class="text-red-600 text-sm mt-1">
                    {% for error in form.last_name.errors %}
                    <span>{{ error }}</span>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
        </div>
        {% endif %}

        <!-- Email -->
        <div class="relative">
            {{ form.email(class="input-field floating-input", id="email", placeholder="") }}
            {{ form.email.label(class="floating-label", for="email") }}
            {% if form.email.errors %}
            <div class="text-red-600 text-sm mt-1">
                {% for error in form.email.errors %}
                <span>{{ error }}</span>
                {% endfor %}
            </div>
            {% endif %}
        </div>

        <!-- Password -->
        <div class="relative">
            {{ form.password(class="input-field floating-input", id="password", placeholder="") }}
            {{ form.password.label(class="floating-label", for="password") }}
            {% if form.password.errors %}
            <div class="text-red-600 text-sm mt-1">
                {% for error in form.password.errors %}
                <span>{{ error }}</span>
                {% endfor %}
            </div>
            {% endif %}
        </div>

        {% if active_page == 'signup' %}
        <!-- Confirm Password -->
        <div class="relative">
            {{ form.confirm_password(class="input-field floating-input", id="confirm-password", placeholder="") }}
            {{ form.confirm_password.label(class="floating-label", for="confirm-password") }}
            {% if form.confirm_password.errors %}
            <div class="text-red-600 text-sm mt-1">
                {% for error in form.confirm_password.errors %}
                <span>{{ error }}</span>
                {% endfor %}
            </div>
            {% endif %}
        </div>
        {% endif %}

        <!-- Submit -->
        {{ form.submit(class="button-primary") }}

        {% if active_page == 'login' %}
        <div class="text-center mt-3">
            <a href="{{ url_for('main.request_password_reset') }}" class="text-sm text-primary hover:underline">
                Forgot password?
            </a>
        </div>

        <div class="flex items-center my-5">
            <hr class="flex-grow border-gray-300">
            <span class="mx-3 text-gray-400 text-sm">or</span>
            <hr class="flex-grow border-gray-300">
        </div>
        {% endif %}

        <!-- Switch Forms -->
        <div class="text-center text-sm">
            {{ "Don't have an account?" if active_page == 'login' else 'Already have an account?' }}
            <a href="{{ url_for('main.signup' if active_page == 'login' else 'main.login') }}" class="link">
                {{ 'Sign Up' if active_page == 'login' else 'Log In' }}
            </a>
        </div>
    </form>
</div>